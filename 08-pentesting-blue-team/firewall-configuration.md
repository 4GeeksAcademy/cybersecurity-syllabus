---
title: "Understanding Firewalls: Essential Protection for Network Security"  
subtitle: "Types, Functions, and How to Effectively Configure Firewalls on Windows, Linux, and pfSense"  
tags: ["cybersecurity", "pentesting"]  
authors: ["blindma1den", "lorenagubaira"]  

---

A firewall is a network security system designed to monitor and control inbound and outbound traffic based on predetermined security policies. Its primary function is to create a barrier between a secure internal network and an external network, such as the Internet, to protect the internal network from unauthorized access, attacks, and other security risks.

## When do you need a firewall?

A firewall is required for any machine that connects to the Internet. Not just your PC, but also your web server, phone, IoT devices, or anything you can think of that can use the Internet. An unprotected device is an easy choice for intrusions and infections. This could give hackers the ability to take over your computers, install whatever they want, watch while you enter sensitive information such as banking credentials, or even look through your webcam/camera and listen in through your microphone. In the case of a web server, if a hacker gets through, they could de-configure your website, embed malware that infects your visitors, change your WordPress admin password, or take down your site entirely.

Without a firewall, your website and even your devices are vulnerable to DDoS attacks, an attack vector that sends thousands or millions of spoofed packets to overload your server and bring your website or the Internet down.

The firewall can protect your computers, servers, or your website against:

- Intrusions: Firewalls prevent unauthorized users from accessing your computer or server remotely and doing whatever they want.
- Malware: Attackers who manage to infiltrate can send malware to infect you or your server. Malware can steal personal information, spread it to other users, or otherwise damage your computer.
- Brute-force attacks: Attempts by hackers to try hundreds of username and password combinations to discover your administrator's (or other users') log in credentials.
- DDoS attacks: Firewalls (especially web application firewalls) may attempt to detect the influx of spoofed traffic that occurs during a DDoS attack.

## Types of firewalls

There are many different types of firewalls, each designed for a different situation. Some are better for individual computers, while others are made to filter the entire network. They all work differently and block different types of traffic better. If you're wondering what you should look for, we're going to look at all the major types of firewalls. Unless you have your server stack (providing a website with your Internet), the types of firewalls you should primarily worry about are personal firewalls, software firewalls, and web application firewalls. These three are the most important. However, read more about the rest if you want to better understand how a firewall works and how they have evolved over the years.

### 1) Personal firewall

Firewalls work very differently depending on whether they are used by individual devices, entire networks (such as within a commercial office), or web servers. A personal firewall is intended for use on a single device. This is the firewall that comes pre-installed on Windows and Mac machines or with your antivirus software. While it works similarly to a server firewall - allowing or rejecting connections from other devices, applications, and IPs based on a set of predefined rules - it acts a little differently.

Personal firewalls can protect the ports you use to connect to websites and online applications (hiding them, so attackers can't see they're open), defend against attacks that slip through the network, prevent people from accessing and taking over your computer, and analyze all incoming and outgoing traffic. They also act as firewall applications, monitoring application activity on your device and refusing to allow a connection to be established with insecure or unknown software. Nowadays, getting a personal firewall is fairly easy. If you use any modern version of Windows, there should already be one by default.

**Windows Defender Firewall**k

![firewall2](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/firewall2.png?raw=true)

**Firewall application on macOS**

Mac devices also come with one, although you have to turn it on yourself. To do so, navigate to System Preferences, click Security & Privacy and then Firewall:

![firewall3](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/firewall3.png?raw=true)

Antivirus software often comes with its own as well. An example is [Avast antivirus](https://www.avast.com/): its firewall software is compatible with Windows and serves as a second layer of defense. Third-party personal firewalls are also available but may cause a conflict with the default settings.

### 2) Hardware vs. Software Firewalls

Firewalls come in two distinct forms: hardware and software firewalls. Software firewalls are downloadable programs for your device, monitoring everything from a central control panel. Hardware firewalls provide similar functionality but are physically installed in the building. You may not know it, but you probably have a form of hardware firewall in your home: your router, the device that allows you to connect to the Internet. While not the same as a dedicated hardware firewall device, it provides similar functions of monitoring and allowing or denying connections.

Both software and hardware firewalls sit between the device and the outside world, carefully analyzing any connections that try to sneak through. You can have one or both running on your network. However, hardware firewalls have some disadvantages. They are difficult to install and require ongoing maintenance, so they are not usually suitable for individual devices or very small companies without an IT department. They can cause performance problems, especially when applied in conjunction with a software firewall. And they are not suitable for blocking applications on a device, or user-based restrictions.

On the other hand, a hardware firewall will protect your entire device network easily, while configuring the software for it is a more difficult task. And while an attacker can disable the software if they gain entry, they cannot manipulate the physical device. Software firewalls are, as the name implies, better at working with programs on a device. Blocking applications, managing users, generating logs, and monitoring users on your network are their specialties. They are not as easy to configure across the entire network, but when installed on multiple devices, they allow for finer control.

### 3) Packet Filtering Firewall

The packet filtering firewall is the simplest type of firewall and is among the first to be developed. A packet is the information exchanged between your device and a server. When you click on a link, upload a file, or send an email, you send a packet to the server. And when you load a web page, it sends packets to you. A packet-filtering firewall analyzes these packets and blocks them based on a set of predefined rules. For example, it might block packets originating from a certain server or IP address, or packets trying to reach a certain destination on your server.

The downside: These types of firewalls are simple and easy to fool. There is no way to apply advanced rules. If you allow traffic to flow through a certain port, the packet filtering firewall will let anything through, even traffic that modern firewalls obviously wouldn't let through. The only advantage of these is that they are so simple that they have almost no impact on performance. They do not inspect traffic, keep logs, or perform any advanced functions. Nowadays, packet filtering firewalls should be avoided or at least used in conjunction with something more advanced, as there are much better solutions.

### 4) Stateful Firewalls

After the ‚Äústateless‚Äù, simple packet filters came the stateful firewall technology. This was revolutionary because instead of analyzing packets as they pass through and rejecting them based on simple parameters, stateful firewalls handle dynamic information and continue to monitor packets as they pass through the network. A simple packet filtering firewall can only block based on static information such as IP address or port. Stateful firewalls are better at detecting and blocking illegitimate traffic because they recognize patterns and other advanced concepts.

Compared to stateless firewalls, the disadvantage is that they are more intensive because they store data packets in memory and analyze them more rigorously, as well as keep logs of what is blocked and what passes through them. But they are a much better solution.

### 5) Next-generation firewalls.

Finally, next-generation firewalls (NGFWs), are one of the newest inventions in this generation of security technology. These enterprise-grade tools are like all of the above combined into one. Deep packet filtering, intrusion prevention, and application monitoring are just a few of their tremendous network features. Cloud-based next-generation firewalls exist as an online service, but WAFs are much more common and provide similar functionality. But if you want the most advanced firewall technology available, with a complete security protection package in one program, look for an NGFW.

## How to get a firewall?

To protect yourself and your Website, you need a high-quality firewall that will keep intruders out. As far as personal firewalls go, you usually don't need to go out of your way to get one. The built-in Windows firewall works just fine without any configuration. And between the application firewall that usually comes with your antivirus software and your router's packet filter, your computer is usually more than protected. Just make sure that your firewall is enabled, that you have a good antivirus installed, and that your router is configured correctly. The same can be said for MacOS users.

## How to configure a firewall in Windows?

- **Access the Firewall settings:** To begin, go to the Control Panel select ‚Äú**Windows Defender Firewall**‚Äù, and go to advanced settings to make further adjustments.

![firewall4](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/firewall4.png?raw=true)

- **Enable Windows Firewall:** Make sure that Windows Firewall is enabled. If it is not, select the ‚ÄúEnable or disable Windows Firewall‚Äù option.
- **Configure inbound and outbound rules:** Decide which applications and services should have access to your network. You can configure specific rules to allow or block access to certain applications or ports.
- **Customize advanced settings:** Click on ‚Äú**Advanced settings**‚Äù to access more detailed options. Here, you can set more specific rules for incoming and outgoing network traffic.

![firewall5](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/firewall5.png?raw=true)

- **Restrict access to the public network:** If you are connected to a public network, consider setting the network profile to ‚Äú**Public**‚Äù. This will restrict certain connections and help protect your device when you are on unsecured Wifi networks.
- **Update regularly:** Keep your Windows Firewall and operating system up to date to ensure you have the latest protections and security patches.

**If you have any antivirus installed with a firewall, it will override the Windows Firewall.**

### What rules can I create with Windows Firewall?

With Windows Firewall, **you can create various rules to control incoming and outgoing network traffic**. Some of the rules you can configure include:

- **Inbound rules for applications:** You can allow or block specific applications from accessing your network. This allows you to control which programs are allowed to receive data from the Internet.
- **Outbound rules for applications:** Similar to the inbound rules, you can allow or block applications from accessing the Internet. This controls which programs can send data to the Internet.
- **Port rules:** You can configure rules to allow or block access to specific ports. This is useful for restricting certain services or connections through specific ports.
- **IP address rules:** You can allow or block access to specific IP addresses. This allows you to control which IP addresses can access your network.
- **Network profile rules:** You can set different rules for specific network profiles, such as private or public networks. This allows you to adjust your security according to the type of network you are on.
- **Custom security rules:** Windows Firewall allows you to create custom rules based on various criteria, such as protocols, network interfaces, and users.

![firewall6](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/firewall6.us.png?raw=true)

## How to configure a firewall on Linux servers?

For a correct and secure installation of an Internet server, we need to have and configure a firewall. The firewall **regulates incoming and outgoing traffic to and from our machine,** so that we can check that it is related to any of the services offered by the server,selectively allowing or denying connections.

With our firewall we can decide, for example, to accept connections to consult a website via HTTP or SSH connections, but to deny all other connection attempts to other services that we do not wish to offer. Generally, the **traffic that we will be interested in controlling is the incoming** traffic, since it will be from where possible attacks to the server come from. The traffic from the server to the outside should generally not be of concern to us, so it is not usually limited.

### UFW Firewall for Linux

The UFW (Uncomplicated Firewall) is one of the most popular firewalls for Linux systems, due to its simplicity of configuration. It is available by default in many Linux distributions. If this is not the case, **you can install it through the system repositories**, with the typical command for each distribution. For example, on Debian-based systems it would be done with the following command:

```bash
sudo apt install ufw
```

Once installed we have a suite of commands to manage the firewall itself and the server connections. UFW is disabled by default, to avoid possible problems of access to the server before its configuration, so the first step is to define what types of connection we want to enable, and then enable the firewall. We can check the firewall status with the ‚Äúufw status‚Äù command. At first, we should see that it is inactive.

```bash
sudo ufw status
```

![firewall7](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/firewall7.png?raw=true)

> It is important that, before activating the firewall, we configure the allowed connections, enabling at least the access by SSH, so that we do not lose access to the server. To find out what kind of connections we can enable or disable on the server, run the command.

```bash
sudo ufw app list
```

The output of this command will tell us which applications the firewall locates that can be configured on our system.

- **Enable SSH**

To allow access to the server by SSH we must enable the connections with the application ‚Äú**OpenSSH**‚Äù. This is achieved with the following command:

```bash
sudo ufw allow ‚ÄúOpenSSH‚Äù.
```

By default, connections are allowed for both IPV4 and IPV6. The enabled connection ports will be the default for these connection types (SSH port 22).

- **Enable HTTP traffic to the web server**.

Similarly, we can enable HTTP traffic to access the installed web server. In our case, if we have Apache on the server, we would perform the configuration by enabling the mentioned application.

```bash
sudo ufw allow "Apache Full"
```

The ‚Äú**Apache Full**‚Äù application allows us to access via HTTP through the common HTTP (80) and HTTPS (443) ports.

- **Activate the firewall**

Once the configuration is done, we can activate the firewall, with the `ufw enable` command.

```bash
sudo ufw enable
```

It will warn us that SSH connections may be interrupted, but we can rest assured that we have just enabled them with the previous commands. Finally, we can check the UFW configuration with the command ‚Äúufw status‚Äù. We should now see that the firewall is active and we can also get a list of enabled applications.

```bash
$ sudo ufw status
```

![firewall8](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/firewall8.png?raw=true)

> ü§ì **That's all. The firewall configuration was successful and is now active on our server to increase security.**

## pfSense configuration on VMWare Workstation

pfSense is an open-source firewall and its FreeBSD distribution. It is more popular than other firewalls and we can also install it as a virtual machine. pfSense also has physical appliances, and we can also install pfSense in the cloud (AWS and Azure).

### Installing pfSense

First, I needed to have virtualization software such as VMWare or Virtual Box, and now I am using VMWare to install pfSense. Secondly, you must have a Linux or Windows virtual machine for the Ngnix server setup; I am using Ubuntu for now.

Open your favorite browser and search for `‚ÄúpfSense download‚Äù` or open https://www.pfsense.org/download/

![pfSense1](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense1.png?raw=true)

You will be redirected to the pfSense download page.

![pfSense2](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense2.png?raw=true)

- After downloading, **unzip** this file. Now open VMWare, then click **Create a new virtual machine**.

![pfSense3](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense3.png?raw=true)

Now click **typical,** then click **Next.**

![pfSense4](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense4.png?raw=true)

Select the location of the file by clicking **Browse**. Here, VMWare automatically detected that it was **FreeBSD.** Then click **Next** .

![pfSense5](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense5.png?raw=true)

You can edit the VM name and choose the path where you want to store the VM or keep everything as default. Then click **Next**.

![pfSense6](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense6.png?raw=true)

Provide the **maximum disk space** you want to allocate for pfSense and click **Next**.

![pfSense7](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense7.png?raw=true)

You are at the final step, which is the key step that many people face with this problem.

![pfSense8](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense8.png?raw=true)

Click **Network Adapter** and configure this adapter for WAN to communicate with the Internet. Then click **Add. You will then see a screen like the one in the image below.

![pfSense9](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense9.png?raw=true)

Choose **Network Adapter**, and click **Finish**.

![pfSense10](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense10.png?raw=true)

Now use this adapter for **LAN** communication. Now Crate is a local area network by clicking on the **LAN segment**.

![pfSense11](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense11.png?raw=true)

Click **Add**. and then name it as you wish.

![pfSense12](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense12.png?raw=true)

![pfSense13](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense13.png?raw=true)

Click **Start Machine**. pfSense will take a little while to start up and then **accept** its terms and conditions by clicking **Enter**. You will see three options. Choose the first option, **Install**, then press Enter.

![pfSense14](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense14.png?raw=true)

Go to the default in this step.

![pfSense15](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense15.png?raw=true)

Click on all defaults, and press Enter.

![pfSense16](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense16.png?raw=true)

![pfSense17](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense17.png?raw=true)

![pfSense18](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense18.png?raw=true)

Press space here.

![pfSense19](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense19.png?raw=true)

Then choose **YES**.

![pfSense20](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense20.png?raw=true)

It will take a while.

![pfSense21](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense21.png?raw=true)

![pfSense22](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense22.png?raw=true)

![pfSense23](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense23.png?raw=true)

> üòÅ We have successfully installed pfSense.

### Setting up pfSense in Ubuntu

Turn on the Ubuntu virtual machine.

![Ubuntu1](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/ubuntu1.png?raw=true)

Then the LAN adapter of your choice is in pfSense.

![Ubuntu2](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/ubuntu2.png?raw=true)

The same network adapter was also used in pfSense.

![Ubuntu3](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/ubuntu3.png?raw=true)

Now turn on the Ubuntu machine. Open the terminal and update the repositories by typing the command **sudo apt update. Install the Nginx server using **sudo apt install nginx**.

![Ubuntu4](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/ubuntu4.png?raw=true)

![Ubuntu5](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/ubuntu5.png?raw=true)

Open Firefox or your favorite browser on Ubuntu and check the local host whether the server is running or not.

![Ubuntu6](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/ubuntu6.png?raw=true)

Configure the ubuntu firewall. By default, the **ufw** firewall is installed in ubuntu. First, check the applications by typing the command **sudo ufw app list** and the remaining command to allow and deny the rules shown in the following image.

![Ubuntu7](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/ubuntu7.png?raw=true)

We have successfully added the deny rule in the Ubuntu ufw firewall.

## Configuring pfSensem

After starting pfSense, you will see the welcome screen.

![Ubuntu8](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/ubuntu8.png?raw=true)

By default, DHCP is enabled and IPV6 is also enabled for some people, don't worry, we will fix it. DHCP will automatically assign the IP address; we can configure it using static IP. You need to have a static IP for pfSense. In pfSense, select **option 2**, then choose option 1 (WAN). If you want to continue with DHCP, press **Y**, but you will face many problems in the future. Depending on the range of your subnets, select subnet. For home purposes, use a mask of 24 subnets.

![pfSense24](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense24.png?raw=true)

![pfSense25](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense25.png?raw=true)

![pfSense26](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense26.png?raw=true)

Now open Ubuntu, then open the browser and type the LAN IP address. In my case, it is 192.168.1.1.1. By default, the username and password are **admin** and **pfsense,** respectively.

![pfSense27](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense27.png?raw=true)

![pfSense28](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense28.png?raw=true)

![pfSense29](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense29.png?raw=true)

If you have a hostname and a DNS server, fill in those details. Here, I go all default.

![pfSense30](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense30.png?raw=true)

![pfSense31](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense31.png?raw=true)

![pfSense32](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense32.png?raw=true)

Download and uncheck, block the private network and the network without an Internet path.

![pfSense33](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense33.png?raw=true)

![pfSense34](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense34.png?raw=true)

![pfSense35](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense35.png?raw=true)

In this step, change the administrator password. If you are setting up the firewall in the office or at home, it is not recommended to use an administrator account and strong passwords for both users and administrators. Here I am using it for lab purposes only, so I am keeping everything default.

![pfSense36](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense36.png?raw=true)

![pfSense37](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense37.png?raw=true)

![pfSense38](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense38.png?raw=true)

The pfSense configuration is also done. We need to add a NAT rule to the firewall. Open the pfSense home page, click on **Firewall**, and then click on **NAT**.

![pfSense39](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense39.png?raw=true)

Click **Add**. This is the first rule, so we should not worry about those arrows when adding. If you have many rules before or in the future, you want to add that rule at the top, then click **the up arrow Add** or add that at the bottom and then click the **bottom arrow add**.

![pfSense40](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense40.png?raw=true)

Here, keep all the defaults except the destination IP address, source IP, and ports. In the destination, enter the pfSense IP address by selecting Single host or alias. In my case, it is 192.168.0.100.

![pfSense41](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense41.png?raw=true)

![pfSense42](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense42.png?raw=true)

In the destination port range, enter the port to which you want to redirect the traffic. In my case, it is 9000.

![pfSense43](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense43.png?raw=true)

In the source, the IP address is where the traffic comes from, in our case, it comes from Ubuntu, so enter the Ubuntu IP (192.168.1.100).

![pfSense44](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfSense44.png?raw=true)

![pfSense45](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfSense45.png?raw=true)

Click **save**. Now click on Apply Changes.

![pfSense46](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfSense46.png?raw=true)

Now on your host machine, open the browser and search for pfSense IP and the port you have configured.

![pfSense47](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfSense47.png?raw=true)

That's it. You have successfully performed port forwarding with pfSense.
