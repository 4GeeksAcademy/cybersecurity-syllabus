

# PREWORK

## **Configuraci√≥n del entorno en Kali Linux**

Este es un tema ya abordado en este bootcamp, a modo de repaso dejare el material completo y agregamos y ampliamos m√°s algunos completos para un comprendimiento mucho m√°s profundo en la materia.

### C√≥mo crear un Laboratorio de Hacking

Tener un laboratorio de hacking es esencial para el aprendizaje pr√°ctico y el perfeccionamiento de habilidades. Este art√≠culo te guiar√° paso a paso en la creaci√≥n de tu laboratorio de hacking en 2024, proporcionando las herramientas y conocimientos necesarios para experimentar de manera segura y efectiva en un entorno controlado.

Aprender ciberseguridad requiere muchos ejercicios pr√°cticos. Para eso, es √∫til tener un entorno dedicado y protegido para practicar diferentes t√©cnicas de forma legal y segura.

Puedes lograr esto de dos maneras:

- La primera es tener tu propio laboratorio de hacking, creado con fines educativos y con un equipamiento realista, similar al que encontrar√≠as en una red normal.
- Y el segundo es a trav√©s de plataformas CTF (Capture The Flag), que son sitios web con desaf√≠os de ciberseguridad por resolver.

En esta gu√≠a, te mostrar√© c√≥mo construir un laboratorio para practicar hacking. Este entorno contar√° con servidores reales que podr√°s utilizar sin meterte en problemas.

Para eso vamos a preparar un entorno virtualizado con herramientas gratuitas que luego usaremos para implementar t√°cticas ofensivas y defensivas. Lo √∫nico que necesitas es una computadora port√°til o de escritorio.

<aside>
ü§ì El hacking √©tico es una habilidad que se aprende con el tiempo.
</aside>

Se requiere pr√°ctica y paciencia para alcanzar un nivel de habilidad decente en este campo. Tener a mano una configuraci√≥n de laboratorio puede ayudarte mucho en tu aprendizaje. Un laboratorio le permite practicar sus habilidades en un entorno controlado, lo que reduce los riesgos que surgen al practicar en sistemas reales. Tener tu laboratorio virtual te ayudar√° de muchas maneras:

- Puedes practicar en cualquier momento seg√∫n tu conveniencia.
- No tiene que exponer sus datos al peligro de que se borren debido a una infecci√≥n de malware.
- Tambi√©n se salva de problemas legales que pueden resultar de realizar pruebas en un sitio web real que no es de su propiedad.
- Tienes la libertad de experimentar y modificar (casi imposible con los laboratorios en l√≠nea).

Aprender hacking y convertirse en un hacker √©tico experto requiere una pr√°ctica inmensa. Para ello, necesita configurar un laboratorio donde pueda probar las cosas que aprende. Adem√°s, si practica en un sistema real, puede conllevar riesgos de seguridad.

### Objetivos

- Comprender c√≥mo funcionan las m√°quinas virtuales
- Aprenda a crear un entorno virtual b√°sico para fines de pentesting.

### Requisitos

Arranquemos con lo que tengamos, pero es vital al menos tener:

- Windows 10, 11, macOS o cualquier distribuci√≥n de Linux
- Al menos 16 GB de RAM, ya que vamos a virtualizar entornos, sino ir√° muy lento. Esto se debe a que la memoria se divide entre el host y la m√°quina virtual. (se recomiendan 32 GB para trabajar con multiples m√°quina virtuales)
- Oracle Virtualbox o VMWare para crear las m√°quinas virtuales dentro de su computadora f√≠sica.
- M√°quina atacante. Lo vamos a crear con Kali Linux para tener todas las herramientas ofensivas necesarias.
- M√°quinas v√≠ctimas que ser√°n servidores reales con vulnerabilidades que vamos a explotar. Usaremos VulnHub, que tiene un conjunto de m√°quinas vulnerables listas para descargar y usar.

## Planificaci√≥n de la configuraci√≥n de su laboratorio

Cuando comenc√© a montar mi laboratorio personal, me di cuenta de que un poco de pensamiento estrat√©gico ayuda mucho. Entonces, aqu√≠ est√° la primicia sobre c√≥mo abord√© la fase de planificaci√≥n:

**1. Definir tus metas y objetivos:** Lo primero es lo primero: me pregunt√©: ¬´¬øPor qu√© quiero este laboratorio?¬ª ¬øEs para dominar una t√©cnica de hacking concreta, explorar las vulnerabilidades de la red o tal vez para comprender c√≥mo funciona el malware? Tener objetivos claros en mente ayuda a dar forma al resto de tu configuraci√≥n. Por ejemplo, si le interesa m√°s la seguridad web, su laboratorio podr√≠a inclinarse hacia plataformas y herramientas de prueba de aplicaciones web.

**2. Identificar herramientas y tecnolog√≠as:** Seamos realistas, el mundo del hacking √©tico tiene m√°s herramientas que el taller de un personal de mantenimiento. Examin√© los distintos tipos de herramientas, desde esc√°neres de red hasta descifradores de contrase√±as, y eleg√≠ las que se alineaban con mis objetivos. Es como armar la caja de herramientas de tus sue√±os: ¬°solo con l√≠neas de c√≥digo y exploits virtuales!

**3. Elegir el hardware y el software adecuados:** Ahora, antes de dejarse llevar y empezar a pedir un mont√≥n de dispositivos llamativos, piense en lo que se adapta a su espacio y presupuesto. Para m√≠, el software de virtualizaci√≥n cambi√≥ las reglas del juego. Podr√≠a ejecutar varias m√°quinas virtuales (VM) en una sola m√°quina f√≠sica, creando diferentes entornos para realizar pruebas sin saturar mi habitaci√≥n con pilas de hardware.

<aside>
üëâ Entonces, este es el trato, amigos: t√≥mate un tiempo para intercambiar ideas, investigar y decidir cu√°l ser√° el enfoque principal de tu laboratorio. ¬øEst√°s sumergi√©ndote en la seguridad inal√°mbrica? ¬øQuiz√°s tienes curiosidad por la ingenier√≠a social? Una vez que hayas resuelto tu misi√≥n, ¬°podemos pasar al meollo de la cuesti√≥n de construir este patio de juegos digital! üéÆ
</aside>

## Sistemas a Usar

**Windows:** Depende el √°rea de seguridad en la que trabajen es lo que van a necesitar en hardware y software no es lo mismo ser un forense que un pentester. Como tengo que hacer reportes me sirve trabajar en Windows. Uso mucho ONENOTE para llevar todo el material que estoy estudiando y trabajando.

Adem√°s, la cantidad de herramientas de gesti√≥n de disco, archivos, documentos y gr√°ficos al nivel que necesito trabajarlas no est√°n disponibles en Linux. Lo m√°s probable es que te convenga iniciar virtualizando Kali, por lo que podr√°s mantener como nativo a Windows.

**Linux:** La mayor√≠a de herramientas est√°n disponibles en Linux y, de hecho, Kali ya soluciona eso. Tenemos una guia de como crear tu laboratorio y resolver los problemas m√°s comunes: [Crea tu Laboratorio de Pentest con Kali Linux, Metasploitable y Beebox](https://achirou.com/crea-tu-laboratorio-de-pentest-con-kali-linux-metasploitable-y-beebox/)

## Hardware

Arranquen con lo que tengan, al final todos empezamos con lo que tenemos. Si van a mejorar o comprar un equipo mi recomendaci√≥n PC es mejor que notebook por m√∫ltiples razones. Va a depender del √°rea en la que trabajen, si necesitan movilidad no les queda m√°s que ir por una notebook.

Fuera de la √∫nica ventaja que tiene la notebook que es la de ser portable un PC es superior en todo. Menor costo, mayor capacidad de expansi√≥n, f√°cil y econ√≥mico de reparar, y cuando comparas la ‚Äúmisma‚Äù versi√≥n entre PC y notebook la de pc tiende a ser MUY superior en rendimiento.

Otra gran ventaja son los monitores, mi recomendaci√≥n es de 2 o 3 es ideal. Yo en este momento estoy usando 4. Realmente usar varios monitores simplifica mucho el trabajo. En uno podr√°n trabajar con Kali y en el otro realizar un informe m√°s c√≥modamente. Nuevamente esto depende del √°rea en el que est√©n. En este momento estoy trabajando en un i5 (algo viejo de 10ma) con 64gb de RAM y no he tenido problemas virtualizando.

![Gestor de tareas](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/gestor-tareas.png?raw=true)

Por citar un ejemplo si usan un scanner como ZAP ver√°n que estos comen mucha RAM y si guardan la secci√≥n mucho disco. Me refiero a que pueden gastar 10gb/16GB de RAM y 70gb ‚Äì 150gb de disco tan solo con una sola aplicaci√≥n. Por eso las recomendaciones y buenas pr√°cticas a la hora de crear su m√°quina virtual con Linux.

![Propiedades zap](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/propiedades-zap.png?raw=true)

|  | M√≠nimo | Recomendado |
| --- | --- | --- |
| CPU | I3 / Ryzen3 o superior | I5 / Ryzen 5 o superior |
| Memoria | 16gb | 32gb+ |
| SO | W10/kali | W11/Kali everything |
| Disco | SSD 512 | SSD 1TB+ |
| Placa de Video | No vital | Puede ser √∫til si desean colocar 3 o m√°s monitores. Esto depender√° del motherboard y las entradas de sus monitores. |

## Instalaci√≥n de Metasploitable 2

Metasploitable es un sistema operativo que ha sido dise√±ado con el objetivo de ser vulnerado con sencillez y gracias a esto poder llevar a cabo cientos de pruebas de penetraci√≥n para mejorar la seguridad y prevenir ataques a corto, mediano o largo plazo.

### Qu√© es Metasploitable

Es un sistema de Linux que ha sido desarrollado con las m√°s altas vulnerabilidades de seguridad en el cual podemos llevar a cabo todas las pruebas necesarias para perfeccionar las t√©cnicas de seguridad o conocer c√≥mo sacar el m√°ximo provecho a aplicaciones dise√±adas para este fin.

Metasploitable no cuenta con entorno gr√°fico y se recomienda ser usado en redes privadas exclusivamente debido a su tolerancia a ataques. Es de c√≥digo abierto y permite realizar pruebas de vulnerabilidades en archivos incrustados, atributos de archivo, permisos, etc. A continuaci√≥n veremos c√≥mo instalar Metasploitable en VirtualBox para realizar las diversas pruebas seg√∫n sea la necesidad de cada uno.

### Requisitos previos

Para esto ser√° necesario contar con lo siguiente:

- [VIRTUALBOX](https://www.virtualbox.org/wiki/Downloads)
- [https://sourceforge.net/projects/metasploitable/files/Metasploitable2/](https://sourceforge.net/projects/metasploitable/files/Metasploitable2/)

Para iniciar el proceso podremos crear la m√°quina virtual en VirtualBox pulsando en el icono **Nueva** ubicado en el costado superior y en la ventana desplegada ingresaremos los siguientes valores:

![metasploitable1](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/metasploitable1.png?raw=true)

Pulsamos en **Next** y en la siguiente ventana podremos dejar el valor de la memoria RAM por defecto, 2048MB, o bien asignar un poco m√°s si as√≠ lo deseamos.

![metasploitable2](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/metasploitable2.png?raw=true)

Pulsamos en **Next** y en la siguiente ventana seleccionamos la opci√≥n **Crear un disco duro virtual ahora:**

![metasploitable3](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/metasploitable3.png?raw=true)

Pulsamos en **Next** y en Terminar.

![metasploitable4](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/metasploitable4.png?raw=true)

Ahora pulsaremos en el bot√≥n **Iniciar** para comenzar el proceso de instalaci√≥n del sistema.

![metasploitable5](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/metasploitable5.png?raw=true)

Este proceso tarda alrededor de 5 minutos y veremos lo siguiente:

![metasploitable6](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/metasploitable6.png?raw=true)

Las credenciales de acceso son:

- **Usuario: msfadmin**
- **Contrase√±a: msfadmin**

![metasploitable7](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/metasploitable7.png?raw=true)

De esta forma podremos usar Metasploitable con todas las pruebas necesarias.

## Bee-Box

Si deseamos instalar en una m√°quina virtual el proyecto es [Bee-Box](https://sourceforge.net/projects/bwapp/files/bee-box/bee-box_v1.6.7z/download). **Bee-box es una m√°quina virtual Linux con todo preinstalado**. As√≠ solo deberemos explorar todas las vulnerabilidades bWAPP sin correr el riesgo de desfigurar el sitio web bWAPP. Adem√°s con la m√°quina virtual podremos intentar conseguir acceso root.

I**nstalaremos la versi√≥n Bee-Box de bWAPP**, para ello descomprimimos el archivo que descargamos y los creara una carpeta con muchos archivos vmdk a nuestro servidor local. A continuaci√≥n crearemos la m√°quina virtual asignando una versi√≥n Linux Ubuntu de 32 bit.

![Bee-Box1](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/beebox1.png?raw=true)

![Bee-Box2](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/beebox2.png?raw=true)

A continuaci√≥n deberemos seleccionar el archivo descargado denominado **bee-box.vdmk**

![Bee-Box3](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/beebox3.png?raw=true)

![Bee-Box4](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/beebox4.png?raw=true)

Antes de iniciar la m√°quina virtual, recordemos que deberemos configurar la red esto la hacemos desde **Configuraci√≥n** para poder tener una direcci√≥n IP y poder acceder a la m√°quina virtual desde otro ordenador.

![Bee-Box5](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/beebox5.png?raw=true)

Hacemos clic en crear y luego en Iniciar, para que la m√°quina virtual comience a funcionar, una vez cargada veremos el escritorio.

![Bee-Box6](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/beebox6.png?raw=true)

### Recomendaciones

**Excluye directorios en el antivirus**. La soluci√≥n de seguridad de tu equipo puede estar escaneando los archivos de la m√°quina virtual cada vez que se acceda a ellos, reduciendo el rendimiento. El antivirus no puede ver el interior de la m√°quina virtual para detectar virus que se ejecuten en sistema operativo invitado, por lo que esta exploraci√≥n es in√∫til. Para acelerar las cosas, a√±ade el directorio de la m√°quina virtual a la lista de exclusiones de tu antivirus.

**Suspender en lugar de apagar**. Cuando hayas terminado de utilizar la m√°quina virtual, es posible que desees guardar su estado en lugar de apagarla completamente. La pr√≥xima vez que la necesites, basta hacer un doble clic para ponerla en marcha. El sistema operativo hu√©sped se reanudar√° donde lo dej√≥ en lugar de arrancar desde cero. La funci√≥n es similar a la hibernaci√≥n o suspensi√≥n. La aplicaci√≥n guarda el contenido de la memoria de la m√°quina virtual en un archivo en el disco duro, para cargarla cuando lo requiera el usuario.

**Para m√°quinas virtuales, mejora tu hardware**. Todo lo dicho anteriormente es una ayuda para mejorar el rendimiento de nuestras m√°quinas virtuales pero, no hay milagros al utilizar este recurso tecnol√≥gico. Aqu√≠ s√≠ vale el dicho de cuanto m√°s mejor. Como habr√°s visto, para que funcionen adecuadamente tenemos que cederles recursos de nuestra m√°quina principal. Y no pocos. Si tu hardware no es lo suficientemente potente y las utilizas, puedes bloquear por completo tu equipo en cuanto ejecutes un sistema que requiera un cierto nivel de potencia, si bien el consumo de recursos de, por ejemplo, Windows 11 o DOS es totalmente diferente.

<aside>
üëâ Ya ten√©s listo tu laboratorio para pentest
</aside>

Al seguir esta gu√≠a, has construido un laboratorio de pentest s√≥lido que te brinda la oportunidad de enfrentarte a escenarios del mundo real de manera controlada. Contin√∫a explorando nuevas vulnerabilidades, t√©cnicas de explotaci√≥n y soluciones de seguridad. Tu viaje en el mundo del pentesting acaba de comenzar, ¬°sigamos avanzando hacia la maestr√≠a en ciberseguridad!

Con estos pasos hemos aprendido a instalar Kali Linux en VirtualBox y as√≠ tener a mano un sistema vital tanto para trabajar como para nuestro laboratorio.