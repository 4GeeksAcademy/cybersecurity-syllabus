# Gateway (servidores proxy)

Son una alternativa a los filtros de paquetes ya que soportan filtros a nivel de aplicación en lugar de a nivel de red y transporte. Actúan para un protocolo de aplicación y **hay un proceso *proxy* para cada protocolo que se quiere filtrar**. Un servidor *proxy* reside entre los clientes y el servidor real, intercepta las peticiones de los clientes de servicios particulares, las evalúa y decide qué tráfico se permite y qué tráfico se bloquea.

**Arquitectura de servidores *proxy***

![servidores-proxy](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/servidores-proxy.png?raw=true)

## Ventajas de servidores proxy:

- Soluciona problemas que presentan los filtros de paquetes, ya que permite filtrar a nivel de aplicación se puede filtrar por operaciones concretas de protocolo.
- Ej. en ftp se podría poner una regla de bloqueo de todos los comandos *put* y nadie podría subir archivos al servidor.
- los problemas relacionados con el esquema de ftp desaparecen ya que el *proxy* cambia el número de puerto usado en las sesiones para mantener el estado de las dos sesiones.
- Pueden tener un proceso separado por protocolo, no tienen que tratar de hacerlo todo a la vez.
- Es sencillo restringir el acceso a un servicio: si no hay *proxy*, no hay servicio.
- Simplifica las reglas de filtrado en el encaminador. Solo se debe permitir el tráfico hacia la pasarela de aplicación y bloquear el resto.
- Permite un grado de ocultación de la estructura de la red protegida. El nombre del *proxy* será el único que estará disponible hacia el exterior.

### Desventajas de servidores proxy:

- Al funcionar un proceso *proxy* por servicio, se debe tener multitud de ellos, si se quiere atender al filtrado de muchos protocolos.
- Puede pasar que se tenga que usar distintos clientes, servidores o ambos.
- Pueden llegar a ser un cuello de botella para el tráfico.

### Tipos de servidores proxy

- Un sistema genérico, SOCKS, requiere clientes distintos a los típicos, no es popular.
- Proxy Server, como el de Microsoft, es un paquete de *software* que permite hacer *proxy* de protocolos ftp, http y nntp.
- TIS FWTK, de *Trusted Information Systems*, que incluye distintos tipos de servidores *proxy*. Entre otros, incluye proxies para Telnet, FTP, Rlogin, Sendmail, HTTP, etc.

**¿Qué se puede mejorar?**

- Trabajar con tecnología «*stateful inspection*».
- Reunir varias de las tecnologías, junto con distintos tipos de sistemas de autenticación, AAA, para crear cortafuegos mucho más sofisticados.
- Con todas las tecnologías disponibles, crear distintas arquitecturas y topologías de seguridad, en torno al cortafuego.

## ¿Es un Gateway lo mismo que un Firewall?

No, un gateway (puerta de enlace) no es lo mismo que un cortafuegos (firewall), aunque ambos pueden desempeñar funciones importantes en la gestión y seguridad de redes. A continuación, se explica la diferencia entre los dos:

### Gateway (Puerta de Enlace)

**Función Principal:**
- Un gateway actúa como un punto de entrada y salida en una red, permitiendo la comunicación entre diferentes redes que pueden tener diferentes protocolos. Su función principal es la traducción de direcciones y protocolos.

**Tipos de Gateway:**
- **Puerta de Enlace Predeterminada:** Generalmente, un router que conecta una red local (LAN) con otras redes (por ejemplo, Internet).
- **Gateway de Protocolo:** Permite la comunicación entre redes que utilizan diferentes protocolos (por ejemplo, de IP a IPX).
- **Gateway de Aplicación:** Traduce mensajes a nivel de aplicación (por ejemplo, un servidor proxy que traduce protocolos HTTP a HTTPS).

**Ejemplo:**
- En una red doméstica, el router que conecta la red interna a Internet actúa como un gateway.

### Cortafuegos (Firewall)

**Función Principal:**
- Un firewall es un dispositivo o software que se utiliza para controlar el acceso entre diferentes redes, aplicando políticas de seguridad para permitir o denegar el tráfico en función de reglas predefinidas. Su principal función es proteger la red interna de accesos no autorizados y ataques.

**Tipos de Firewall:**
- **Firewall de Red:** Dispositivo que controla el tráfico entre redes (por ejemplo, entre una LAN y la Internet).
- **Firewall de Aplicación (WAF):** Protege aplicaciones web controlando y filtrando el tráfico HTTP/HTTPS.
- **Firewall Personal:** Software que protege dispositivos individuales al controlar el tráfico de red hacia y desde el dispositivo.

**Ejemplo:**
- Un firewall puede estar configurado para bloquear todo el tráfico entrante no solicitado de Internet, permitiendo solo el tráfico que se inicia desde la red interna.

### Comparación de Gateway vs Firewall:

| **Característica**          | **Gateway**                                           | **Firewall**                                         |
|-----------------------------|-------------------------------------------------------|------------------------------------------------------|
| **Función Principal**       | Conectar diferentes redes y traducir protocolos       | Proteger la red controlando y filtrando el tráfico   |
| **Ubicación Común**         | Router de red, proxy de aplicación                    | Router de borde, dispositivo dedicado, software      |
| **Seguridad**               | No es su función principal, aunque puede tener ciertas funcionalidades de seguridad | Principal función es la seguridad de la red          |
| **Ejemplos de Uso**         | Conectar una LAN a Internet, traducir direcciones IP  | Bloquear tráfico no autorizado, prevenir ataques     |

En resumen, aunque un gateway y un firewall pueden trabajar juntos y en algunos casos un mismo dispositivo puede desempeñar ambas funciones, sus roles principales en una red son diferentes. Un gateway facilita la comunicación entre diferentes redes, mientras que un firewall protege la red controlando el tráfico y aplicando políticas de seguridad.
