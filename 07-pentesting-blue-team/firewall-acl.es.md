Configuraci√≥n de Firewall

## **Firewall**

La seguridad en cada equipo individual sigue siendo esencial pero no se puede considerar de forma aislada.¬† Hay que considerar:

- El n√∫mero de equipos en muchas organizaciones.
- Entornos heterog√©neos con distintos sistemas operativos y versiones de cada sistema operativo
- usuarios con privilegios de administraci√≥n pueden ser un problema a la hora de organizarlos.

> üî• Un cortafuego es una herramienta que protege una red de sistemas y dispositivos interconectados mediante el control del tr√°fico de red. El cortafuego debe tener tres caracter√≠sticas clave:

</aside>

- Todo el tr√°fico de ‚Äúdentro a fuera‚Äù y de ‚Äúfuera a dentro‚Äù debe pasar por √©l.
- Solo el tr√°fico autorizado basado en la pol√≠tica de seguridad puede continuar.
- Debe ser completamente inatacable.

Aunque ning√∫n cortafuego actual cumple estos requisitos completamente, todos intentan acercarse a ellos lo m√°s posible.

![firewall1](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/firewall1.png?raw=true)

Para proteger las redes, se puede optar por colocar uno o varios cortafuegos.

### **Ventajas**:

- capacidad para ser utilizados como un punto esencial de aplicaci√≥n de la pol√≠tica de seguridad.
- son capaces de soportar t√©cnicas avanzadas de autenticaci√≥n de manera m√°s eficaz y econ√≥mica que si se hiciera equipo por equipo.
- pueden centralizar alarmas y registros de tr√°fico
- Tienen menos configuraci√≥n en comparaci√≥n con un sistema de prop√≥sito general
- Necesitan pocos usuarios definidos para llevar a cabo su configuraci√≥n y mantenimiento.

> üëâ La pol√≠tica del tr√°fico en un cortafuego es **restrictiva y solo permite el tr√°fico que ha sido expl√≠citamente permitido**. Esta pol√≠tica es segura, pero cada utilidad que necesite tr√°fico debe ser analizada y permitida de manera individual.

</aside>

### **Desventajas:**

- pueden provocar una falsa sensaci√≥n de seguridad para los usuarios y administradores.
- Si son muy sofisticados, pueden requerir una configuraci√≥n compleja.
- Pueden representar un cuello de botella para el tr√°fico de red.

### **Tipos:**

- filtros de paquetes.
- *Gateways* de aplicaciones.
- *stateful inspection*. (el *Firewall-1* de *Checkpoint* o el *CiscoASA* (*Adaptative Security Appliance*), adem√°s de su tecnolog√≠a particular, pueden configurarse como servidores *proxy*.)
- h√≠bridos.

## **Arquitecturas de cortafuegos**: distintas formas de combinar cortafuegos

- **Filtros de paquetes**

Los filtros de paquetes operan en **el nivel de red y transporte** y filtran paquetes IP bas√°ndose en valores de algunos campos de las cabeceras de IP, TCP o UDP. tambi√©n permiten filtrar el tr√°fico en funci√≥n del enlace de red del que provenga. El m√°s b√°sico consiste en un encaminador que trabaja a nivel de red, aunque en muchos casos, una m√°quina con software dedicado realiza esta tarea.

**Cada filtro est√° compuesto por reglas** que se utilizar√°n de distintas formas y orden en busca de una coincidencia. Un filtro de paquetes examina cada paquete entrante por la interfaz en la que est√° aplicado el filtro y:

1. Obtiene los contenidos de las cabeceras citadas del paquete.
2. Contrasta los valores contra los configurados en las reglas del filtro, ordenadamente.
3. Si cumple lo enunciado en una regla, aplica una de las dos √∫nicas condiciones posibles: lo permite, en cuyo caso el paquete se encaminar√° a su destino o lo descarta.

- **Campos de la cabecera**

Los **campos de las cabeceras que se usan como criterios de filtrado** son:

- Las direcciones IP origen y destino del mensaje, que viajan en la cabecera de IP.
- Los n√∫meros de puerto origen y destino del mensaje, que son parte de la cabecera de TCP o de UDP.
- El tipo de protocolo o n√∫mero de protocolo, parte de la cabecera de IP, que indica, el tipo de mensaje IP: si es ICMP, OSPF, TCP, UDP, etc.
- Una serie de opciones de la cabecera TCP, como los bits de sincronizaci√≥n, de final, de ACK, etc.

Para ser efectivo, un filtro debe permitir la especificaci√≥n de puertos, ya que algunos servidores de aplicaciones IP utilizan n√∫meros de puerto normalizados, mientras que los clientes utilizan n√∫meros de puerto al azar por encima de 1023. Es necesario contar con operadores relacionales para implementar relaciones como ‚Äúmayor que‚Äù o ‚Äúigual a‚Äù y los filtros deben permitir el filtrado de paquetes seg√∫n la interfaz de origen o destino. Pueden ser un software con funcionalidades avanzadas como IPTables o ser parte de un encaminador. La tecnolog√≠a es simple y transparente para los usuarios.

![modelo osi](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/modelo-osi.png?raw=true)

### **Puntos d√©biles**:

- Si la configuraci√≥n llega a hacerse muy grande, puede hacerse dif√≠cil el mantenimiento de los filtros.
- Si se tiene que hacer una excepci√≥n ocasional, puede ser que haya que cambiar toda la configuraci√≥n, haciendo la situaci√≥n bastante insegura.
- No permiten realizar ning√∫n control a nivel de usuario ni a nivel de datos. No se puede filtrar por valores de campos de las cabeceras de aplicaci√≥n.
- No es f√°cil filtrar protocolos con m√°s de una conexi√≥n activa simult√°neamente, como ftp, ni protocolos basados en RPC.
- No suelen guardar registro de los accesos de los usuarios.

Aplicaciones dif√≠ciles de filtrar son aquellas basadas en el entorno RPC (*Remote Procedure Call*), para las que cada servidor RPC tiene asociado un n√∫mero de puerto que no es siempre el mismo. Aplicaciones como NFS (Network File System) o NIS (Network Information Services), env√≠an mensajes al *portmapper* con el n√∫mero de puerto 111 para conocer el n√∫mero de puerto actual del servidor que est√°n buscando. Estas aplicaciones est√°n compuestas por varios servidores que se registran con el *portmapper* al iniciar, lo que las hace dif√≠ciles de filtrar. No se debe permitir el tr√°fico de estas aplicaciones si el cortafuego es solo un filtro de paquetes. Las **reglas de filtrado** se expresan como una tabla de condiciones y acciones que se consultan en orden hasta encontrar una regla para decidir si se permite o se bloquea un paquete.

> ‚ö†Ô∏è Es importante el orden de an√°lisis de las reglas para implementar correctamente la pol√≠tica de seguridad. Cuanto m√°s complejas sean las reglas y su orden de an√°lisis, m√°s dif√≠cil ser√° para el administrador gestionarlas. ¬øY si un paquete que no cumple ninguna regla especificada? Se debe a√±adir una regla por defecto al final de la lista que bloquee todo el tr√°fico que no cumpla con ninguna otra regla.
</aside>

![portmapper](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/portmapper.png?raw=true)

**Access Control Lists**

Muchas implementaciones de filtros de paquetes las incorporan directamente. los encaminadores Cisco incorporan dicho filtrado restrictivo por defecto en sus listas de control de acceso o ACLs (*Access Control Lists*).

> Las ACL de los encaminadores Cisco son de dos tipos: standard y extended.

> **Las ACLs de tipo *standard*** est√°n compuestas de una serie de reglas ordenadas (ACE o Access control entry), cada una de las cuales solo usan, como criterio, la direcci√≥n IP origen del mensaje, y tienen una sintaxis:

> router(config)# access-list N {permit|deny} direcci√≥n-IP-origen [m√°scara]

***Recordar estas reglas para standard y extended:***

1. Al final de todas las reglas existe una m√°s (que no pone el administrador) impl√≠cita, que deniega el resto del tr√°fico, que no coincide con alguna de las reglas de la ACL. Es la condici√≥n de ¬´todo lo dem√°s negado por defecto¬ª.
2. Hay una serie de ¬´palabras clave¬ª que se pueden utilizar para hacer las reglas m√°s legibles. Por ejemplo, en lugar de 144.21.13.12 0.0.0.0, se puede escribir host 144.21.13.12, o en lugar de escribir 0.0.0.0 0.0.0.0, se puede escribir any.
3. El comando access-list solo sirve para construir la ACL, pero no la aplica a ninguna interfaz. Para ello, existe otro comando diferente.

### **Aplicacion de control de acceso**

Para aplicar la ACL a una interfaz concreta, en el caso de los encaminadores de Cisco, se debe pasar a ¬´modo de configuraci√≥n de la interfaz¬ª y aplicar el comando ip access-group. La sintaxis es:

> router(config)# interface nombre-interface

> **router(config-if)#** ip access-group N {in|out}

nombre-interface es la sintaxis propia de Cisco. Ej: ¬´ethernet-0¬ª, N es el n√∫mero que identifica la ACL que se quiere asociar a la interfaz. IN indica tr√°fico entrante y OUT saliente. En la figura. Se quiere dejar pasar hacia dentro todo el tr√°fico de las redes externas (m√°s all√° de la interfaz ethernet-1) excepto el que venga de la red 144.21.0.0. La ACL ser√≠a:

![nombre-interface](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/nombre-interface.png?raw=true)

> **router(config)#** access-list 1 deny 144.21.0.0 0.0.255.255

> **router(config)#** access-list 1 permit any La segunda l√≠nea es obligatoria. Si no se tiene en cuenta, funcionar√° la ¬´por defecto¬ª ya citada, que, aunque no se vea es:

> access-list 1 deny any

Para aplicar la ACL a la interfaz ethernet-1, los comandos ser√≠an:

> router(config)# interface ethernet-1

> router(config-if)# ip access-group 1 in

Filtrando as√≠, solamente, el tr√°fico entrante.

## **Las ACLs de tipo extended**

**Las ACLs de tipo extended,** comparten todas las dem√°s caracter√≠sticas del standa*rd*, pero tienen una sintaxis m√°s complicada, atendiendo a que permiten filtrar utilizando muchos otros criterios:

**router(config)#** access-list N {permit|deny} protocolo dir.IP-fuente [m√°scara-fuente] [op puerto-fuente] dir.IP-destino [m√°scara-destino] [op puerto-destino]

En este caso, N es un n√∫mero entre 100 y 199, para indicar que es una lista extended, protocolo es la referencia al campo de n√∫mero de protocolo de la cabecera IP y op puede ser:

- lt, indicando ¬´menor que¬ª.
- le, indicando ¬´menor o igual que¬ª.
- gt, indicando ¬´mayor que¬ª.
- ge, indicando ¬´mayor o igual que¬ª.
- eq, indicando ¬´igual a¬ª.
- ne, indicando ¬´distinto a¬ª.
- range, que permite expresar un rango de n√∫meros.

Si lo que se busca es en la misma topolog√≠a de la figura anterior, que se cumpla la siguiente pol√≠tica:

- No dejar entrar tr√°fico Telnet externo, salvo de la direcci√≥n 155.15.1.1.
- Permitir el tr√°fico, del tipo que sea, de la direcci√≥n 133.11.1.3.
- No dejar entrar tr√°fico general salvo de la red 144.21.0.0.

**La lista de acceso ser√≠a:**

> router(config)# access-list 101 permit ip host 133.11.1.3 any

> **router(config)#** access-list 101 permit tcp 155.15.11.1 any eq 23

> **router(config)#** access-list 101 permit ip 144.21.0.0 0.0.255.255 any

Al igual que antes, la condici√≥n impl√≠cita por defecto, no permite entrar m√°s tr√°fico.

**gateway (servidores proxy)**

Son una alternativa a los filtros de paquetes ya que soportan filtros a nivel de aplicaci√≥n en lugar de a nivel de red y transporte. Act√∫an para un protocolo de aplicaci√≥n y **hay un proceso *proxy* para cada protocolo que se quiere filtrar**. Un servidor *proxy* reside entre los clientes y el servidor real, intercepta las peticiones de los clientes de servicios particulares, las eval√∫a y decide qu√© tr√°fico se permite y qu√© tr√°fico se bloquea.

**Arquitectura de servidores *proxy***

![servidores-proxy](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/servidores-proxy.png?raw=true)

### Ventajas:

- Soluciona problemas que presentan los filtros de paquetes, ya que permite filtrar a nivel de aplicaci√≥n se puede filtrar por operaciones concretas de protocolo.
- Ej. en ftp se podr√≠a poner una regla de bloqueo de todos los comandos *put* y nadie podr√≠a subir archivos al servidor.
- los problemas relacionados con el esquema de ftp desaparecen ya que el *proxy* cambia el n√∫mero de puerto usado en las sesiones para mantener el estado de las dos sesiones.
- Pueden tener un proceso separado por protocolo, no tienen que tratar de hacerlo todo a la vez.
- Es sencillo restringir el acceso a un servicio: si no hay *proxy*, no hay servicio.
- Simplifica las reglas de filtrado en el encaminador. Solo se debe permitir el tr√°fico hacia la pasarela de aplicaci√≥n y bloquear el resto.
- Permite un grado de ocultaci√≥n de la estructura de la red protegida. El nombre del *proxy* ser√° el √∫nico que estar√° disponible hacia el exterior.

### Desventajas:

- Al funcionar un proceso *proxy* por servicio, se debe tener multitud de ellos, si se quiere atender al filtrado de muchos protocolos.
- Puede pasar que se tenga que usar distintos clientes, servidores o ambos.
- Pueden llegar a ser un cuello de botella para el tr√°fico.

### Tipos de servidores *proxy:*

- Un sistema gen√©rico, SOCKS, requiere clientes distintos a los t√≠picos, no es popular.
- Proxy Server, como el de Microsoft, es un paquete de *software* que permite hacer *proxy* de protocolos ftp, http y nntp.
- TIS FWTK, de *Trusted Information Systems*, que incluye distintos tipos de servidores *proxy*. Entre otros, incluye proxies para Telnet, FTP, Rlogin, Sendmail, HTTP, etc.

**¬øQu√© se puede mejorar?**

- Trabajar con tecnolog√≠a ¬´*stateful inspection*¬ª.
- Reunir varias de las tecnolog√≠as, junto con distintos tipos de sistemas de autenticaci√≥n, AAA, para crear cortafuegos mucho m√°s sofisticados.
- Con todas las tecnolog√≠as disponibles, crear distintas arquitecturas y topolog√≠as de seguridad, en torno al cortafuego.

## **Zona desmilitarizada (DMZ)**

Esta red a√≠sla los servicios que se quieren mantener disponibles por Internet y separa los servicios de la red interna.¬† Si estos servicios estuvieran en la red interna, cualquier ataque podr√≠a poner en peligro toda la red.

**Topolog√≠a de una DMZ t√≠pica**

![DMZ](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/dmz.png?raw=true)

La robustez depender√° de qu√© cortafuegos se seleccione y de lo bien configurado que est√©.

**Dos principios de seguridad:**

- **defensa en profundidad**, los ataques deben de ser capaces de atacar con √©xito primero el encaminador y, despu√©s, el cortafuego.
- **diversidad de defensa: El** cortafuego y el encaminador estan por separado.

**Topolog√≠a de doble DMZ:** consiste en dos DMZs, La externa con¬† elementos que son menos atacables y la DMZ interna.

![tipolog√≠a DMZ](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/tipologia-dmz.png?raw=true)

Es importante seleccionar cuidadosamente los dos cortafuegos y decidir qu√© servicios se colocar√°n en la DMZ externa e interna. Esta arquitectura puede presentar **dificultades de administraci√≥n**. En el caso de dispositivos m√≥viles, un cortafuego no garantiza la protecci√≥n de los datos ya que cuando estos dispositivos se conectan a redes externas no est√°n protegidos por el cortafuego y son susceptibles a ser comprometidos. Si un dispositivo m√≥vil comprometido se vuelve a conectar a la red de la organizaci√≥n, puede ser una puerta de entrada para el atacante y una fuente de infecci√≥n para el resto de equipos de la red.

### **¬øCu√°ndo necesitas un cortafuegos?**

Se requiere un cortafuegos para cualquier m√°quina que se conecte a Internet. No s√≥lo tu PC, sino tambi√©n tu servidor web, tel√©fono, dispositivos de IoT, o cualquier cosa que se te ocurra que tenga la capacidad de usar Internet. Un dispositivo desprotegido es una f√°cil elecci√≥n para las intrusiones e infecciones. Esto podr√≠a dar a los hackers la posibilidad de apoderarse de tus equipos, instalar lo que quieran, vigilar mientras introduces informaci√≥n sensible como credenciales bancarias, o incluso mirar a trav√©s de tu webcam/c√°mara y escuchar a trav√©s de tu micr√≥fono. En el caso de un servidor web, si un hacker consigue pasar, podr√≠a desconfigurar tu sitio web, incrustar un malware que infecte a tus visitantes, cambiar tu contrase√±a de administrador de WordPress, o derribar tu sitio por completo.

Sin un cortafuegos, tu sitio web e incluso tus dispositivos personales son vulnerables a los ataques DDoS, un vector de ataque que env√≠a miles o millones de paquetes falsos para sobrecargar tu servidor y hacer que tu sitio web o Internet se caiga.

El cortafuegos puede proteger tus equipos, servidores o tu sitio web frente a:

- Intrusiones: Los cortafuegos impiden a los usuarios no autorizados acceder a tu equipo o servidor de forma remota y hacer lo que quieran.
- Malware: Los atacantes que logran infiltrarse pueden enviar malware para infectarte a ti o a tu servidor. El malware puede robar informaci√≥n personal, propagarse a otros usuarios o da√±ar de alguna manera tu computadora.
- Ataques de fuerza bruta: Intentos de los hackers de probar cientos de combinaciones de nombres de usuario y contrase√±as para descubrir las credenciales de acceso de su administrador (o de otros usuarios).
- Ataques DDoS: Los cortafuegos (especialmente los de aplicaciones web) pueden intentar detectar la afluencia de tr√°fico falso que se produce durante un ataque DDoS.

### **Tipos de cortafuegos**

Hay muchos tipos diferentes de cortafuegos, cada uno est√° dise√±ado para una situaci√≥n diferente. Algunos son mejores para equipos individuales, mientras que otros est√°n hechos para filtrar toda la red. Todos funcionan de manera diferente y bloquean mejor diferentes tipos de tr√°fico. Si te preguntas qu√© deber√≠as buscar, vamos a analizar todos los principales tipos¬† de cortafuegos. A menos que tengas tu propia pila de servidores (proporcionando un sitio web con tu propia Internet), el tipo de cortafuegos del que debes preocuparte principalmente son los cortafuegos personales, los cortafuegos de software y los cortafuegos de las aplicaciones web. Estos tres son los m√°s importantes. Sin embargo, lee m√°s sobre el resto si quieres entender mejor c√≥mo funciona un cortafuegos y c√≥mo han evolucionado a lo largo de los a√±os.

1. **Cortafuegos personal**

Los cortafuegos funcionan de forma muy diferente dependiendo de si son utilizados por dispositivos individuales, redes enteras (como dentro de una oficina comercial) o servidores web. Un cortafuegos personal est√° pensado para ser usado en un solo dispositivo. Este es el firewall que viene preinstalado en las m√°quinas de Windows y Mac o con tu software antivirus. Aunque funciona de manera similar a un cortafuegos de servidor ‚Äì permitiendo o rechazando conexiones de otros dispositivos, aplicaciones e IPs basadas en un conjunto de reglas predefinidas ‚Äì act√∫a de una manera un poco diferente.

Los cortafuegos personales pueden proteger los puertos que utilizas para conectarte a sitios web y aplicaciones en l√≠nea (ocult√°ndolos para que los atacantes no puedan ver que est√°n abiertos), defenderse contra los ataques que se deslizan por la red, evitar que las personas accedan y se apoderen de tu equipo y analizar todo el tr√°fico entrante y saliente. Tambi√©n act√∫an como aplicaciones de cortafuegos, monitoreando la actividad de las aplicaciones en tu dispositivo y neg√°ndose a permitir que se establezca una conexi√≥n con software inseguro o desconocido. Hoy en d√≠a, obtener un cortafuegos personal es bastante f√°cil. Si usas cualquier versi√≥n moderna de Windows, ya deber√≠a haber uno por defecto.

**Windows Defender Firewall**

![firewall2](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/firewall2.png?raw=true)

**Aplicaci√≥n de cortafuegos en macOS**

Los dispositivos Mac tambi√©n vienen con uno, aunque tienes que encenderlo t√∫ mismo. Para ello, navega a Preferencias del Sistema, haz clic en Seguridad y Privacidad y luego en Firewall:

![firewall3](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/firewall3.png?raw=true)

El software antivirus a menudo viene con el suyo propio tambi√©n. Un ejemplo es el [antivirus Avast](https://www.avast.com/): su software de cortafuegos es compatible con Windows y sirve como una segunda capa de defensa. Tambi√©n existen cortafuegos personales de terceros, pero pueden causar un conflicto con la configuraci√≥n predeterminada.

1. **Hardware vs. Software Cortafuegos**

Los cortafuegos tienen dos formas distintas: cortafuegos de hardware y de software. Los cortafuegos de software son programas descargables para tu dispositivo, monitoreando todo desde un panel de control central. Los cortafuegos de hardware proporcionan una funcionalidad similar, pero est√°n f√≠sicamente instalados en el edificio. Puede que no lo sepas, pero probablemente tengas una forma de cortafuegos de hardware en tu casa: tu router, el dispositivo que te permite conectarte a Internet. Si bien no es exactamente lo mismo que un dispositivo de cortafuegos de hardware dedicado, proporciona funciones similares de monitoreo y de permitir o negar conexiones.

Tanto el software como el hardware de los cortafuegos se sit√∫an entre el dispositivo y el mundo exterior, analizando cuidadosamente cualquier conexi√≥n que intente colarse. Puedes tener uno o ambos funcionando en tu red. Sin embargo, los cortafuegos de hardware tienen algunas desventajas. Son dif√≠ciles de instalar y requieren un mantenimiento continuo, por lo que no suelen ser adecuados para dispositivos individuales o empresas muy peque√±as sin un departamento de inform√°tica. Pueden causar problemas de rendimiento, especialmente cuando se aplican junto con un cortafuegos de software. Y no son adecuados para bloquear aplicaciones en un dispositivo, o restricciones basadas en el usuario.

Por otro lado, un cortafuegos de hardware proteger√° toda su red de dispositivos f√°cilmente, mientras que la configuraci√≥n del software para ello es una tarea m√°s dif√≠cil. Y aunque un atacante puede deshabilitar el software si logra entrar, no puede manipular el dispositivo f√≠sico. Los cortafuegos de software son, como su nombre indica, mejores para trabajar con programas en un dispositivo. Bloquear aplicaciones, administrar usuarios, generar registros y monitorear usuarios en tu red son su especialidad. No son tan f√°ciles de configurar en toda la red, pero cuando se instalan en m√∫ltiples dispositivos, permiten un control m√°s fino.

1. **Cortafuegos de filtrado de paquetes**

El cortafuegos de filtrado de paquetes es el tipo m√°s simple de cortafuegos, y est√° entre los primeros desarrollados. Un paquete es la informaci√≥n que se intercambia entre tu dispositivo y un servidor. Cuando haces clic en un enlace, subes un archivo o env√≠as un correo electr√≥nico, env√≠as un paquete al servidor. Y cuando cargas una p√°gina web, te env√≠a paquetes a ti. Un cortafuegos con filtro de paquetes analiza estos paquetes y los bloquea bas√°ndose en un conjunto de reglas predefinidas. Por ejemplo, podr√≠a bloquear los paquetes que se originan en un determinado servidor o direcci√≥n IP, o los que intentan llegar a un determinado destino en tu servidor.

La desventaja: Estos tipos de cortafuegos son simples y f√°ciles de enga√±ar. No hay forma de aplicar reglas avanzadas. Si permites que el tr√°fico fluya a trav√©s de un determinado puerto, el cortafuegos de filtrado de paquetes dejar√° pasar cualquier cosa, incluso el tr√°fico que los cortafuegos modernos obviamente no dejar√≠an pasar. La √∫nica ventaja de estos es que son tan simples que casi no tienen impacto en el rendimiento. No inspeccionan el tr√°fico, no guardan registros ni ejecutan ninguna funci√≥n avanzada. Hoy en d√≠a, los cortafuegos de filtrado de paquetes deber√≠an evitarse o al menos usarse junto con algo m√°s avanzado, ya que hay soluciones mucho mejores.

1. **Cortafuegos de estado (stateful)**

Despu√©s de los ¬´sin estado¬ª, los filtros de paquetes simples lleg√≥ la tecnolog√≠a de los cortafuegos de estado. Esto fue revolucionario porque en lugar de analizar los paquetes a medida que pasan y rechazarlos bas√°ndose en par√°metros simples, los cortafuegos de estado manejan informaci√≥n din√°mica y contin√∫an monitoreando los paquetes a medida que pasan por la red. Un simple cortafuegos de filtrado de paquetes solo puede bloquear basado en informaci√≥n est√°tica como la direcci√≥n IP o el puerto. Los cortafuegos de estado son mejores para detectar y bloquear el tr√°fico ileg√≠timo porque reconocen patrones y otros conceptos avanzados.

Comparado con los cortafuegos sin estado, la desventaja es que son m√°s intensivos debido a que almacenan paquetes de datos en la memoria y los analizan m√°s rigurosamente, adem√°s de mantener registros de lo que se bloquea y lo que pasa a trav√©s de ellos. Pero son una soluci√≥n mucho mejor.

1. **Cortafuegos de nueva generaci√≥n**

Por √∫ltimo, los cortafuegos de nueva generaci√≥n (NGFW), son uno de los inventos m√°s recientes de esta generaci√≥n de tecnolog√≠a de seguridad. Estas herramientas de grado empresarial son como todas las anteriores combinadas en una sola. El filtrado profundo de paquetes, la prevenci√≥n de intrusos y el monitoreo de aplicaciones son solo algunas de sus enormes caracter√≠sticas de red. Los cortafuegos de √∫ltima generaci√≥n en la nube¬† existen como un servicio en l√≠nea, pero los WAF son mucho m√°s comunes y proporcionan una funcionalidad similar. Pero si quieres la tecnolog√≠a de cortafuegos m√°s avanzada disponible, con un paquete completo de protecci√≥n de seguridad en un programa, busca un NGFW.

### **¬øC√≥mo conseguir un cortafuegos?**

Para protegerse a s√≠ mismo y a tu sitio web, necesitas un cortafuegos de alta calidad que mantenga alejado a los intrusos. En lo que respecta a los cortafuegos personales, no suele ser necesario hacer un esfuerzo para conseguir uno. El cortafuegos incorporado de Windows funciona muy bien sin ninguna configuraci√≥n. Y entre el cortafuegos de aplicaciones que suele venir con el software antivirus y el filtro de paquetes del router, el equipo suele estar m√°s que protegido. Solo aseg√∫rate de que tu cortafuegos est√© activado, que tengas un buen antivirus instalado y que tu router est√© configurado correctamente. Lo mismo puede decirse de los usuarios de MacOS.

## **¬øC√≥mo configurar el Firewall de Windows para bloquear hackers y malware?**

La seguridad cibern√©tica es una preocupaci√≥n cada vez m√°s importante en el mundo que nos rodea. Proteger nuestros dispositivos y datos contra hackers y malware es esencial para salvaguardar nuestra privacidad y evitar ser v√≠ctimas de ciberataques. Una de las herramientas clave para fortalecer nuestra seguridad en Internet es el **Firewall de Windows**, que act√∫a como una barrera entre nuestra red y posibles amenazas externas. En este art√≠culo, te proporcionaremos informaci√≥n detallada y de utilidad sobre **c√≥mo configurar el Firewall de Windows para bloquear hackers y malware**, garantizando una protecci√≥n s√≥lida para tu sistema.

### **¬øQu√© es el Firewall de Windows?**

Este firewall es una **funci√≥n integrada en el sistema operativo Windows** que act√∫a como una **primera l√≠nea de defensa contra amenazas externas**. Funciona controlando el tr√°fico de red que entra y sale de tu PC o red, permitiendo o bloqueando el acceso a determinadas aplicaciones y puertos seg√∫n tus configuraciones.

**¬øC√≥mo configurar el Firewall de Windows?**

- **Accede a la configuraci√≥n del Firewall:** Para comenzar, ve al Panel de Control selecciona ¬´**Firewall de Windows Defender**¬´, entra en configuraci√≥n avanzada para realizar m√°s ajustes

![firewall4](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/firewall4.png?raw=true)

- **Habilita el Firewall de Windows:** Aseg√∫rate de que el Firewall de Windows est√© activado. Si no lo est√°, selecciona la opci√≥n ¬´Activar o desactivar el Firewall de Windows¬ª.
- **Configura las reglas de entrada y salida:** Decide qu√© aplicaciones y servicios deben tener acceso a tu red. Puedes configurar reglas espec√≠ficas para permitir o bloquear el acceso de ciertas aplicaciones o puertos.
- **Personaliza la configuraci√≥n avanzada:** Haz clic en ¬´**Configuraci√≥n avanzada**¬ª para acceder a opciones m√°s detalladas. Aqu√≠, puedes establecer reglas m√°s espec√≠ficas para el tr√°fico de red entrante y saliente.

![firewall5](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/firewall5.png?raw=true)

- **Restringe el acceso a la red p√∫blica:** Si est√°s conectado a una red p√∫blica, considera establecer el perfil de red como ¬´**P√∫blica**¬´. Esto restringir√° ciertas conexiones y ayudar√° a proteger tu dispositivo cuando est√©s en redes Wifi no seguras.
- **Actualiza regularmente:** Mant√©n actualizado el Firewall de Windows y el sistema operativo para asegurarte de tener las √∫ltimas protecciones y parches de seguridad.

**Si tienes algun antivirus instalado con firewall, este se antepondr√° el Firewall de Windows.**

### **¬øQu√© reglas puedo crear con el Firewall de Windows?**

Con el Firewall de Windows, **puedes crear diversas reglas para controlar el tr√°fico de red entrante y saliente**. Algunas de las reglas que puedes configurar incluyen:

- **Reglas de entrada para aplicaciones:** Puedes permitir o bloquear el acceso de aplicaciones espec√≠ficas a tu red. Esto te permite controlar qu√© programas pueden recibir datos desde Internet.
- **Reglas de salida para aplicaciones:** Similar a las reglas de entrada, puedes permitir o bloquear el acceso de aplicaciones a Internet. Esto controla qu√© programas pueden enviar datos hacia Internet.
- **Reglas de puerto:** Puedes configurar reglas para permitir o bloquear el acceso a puertos espec√≠ficos. Esto es √∫til para restringir ciertos servicios o conexiones a trav√©s de puertos espec√≠ficos.
- **Reglas de direcci√≥n IP:** Puedes permitir o bloquear el acceso de direcciones IP espec√≠ficas. Esto te permite controlar qu√© direcciones IP pueden acceder a tu red.
- **Reglas de perfil de red:** Puedes establecer reglas diferentes para perfiles de red espec√≠ficos, como redes privadas o p√∫blicas. Esto te permite ajustar la seguridad seg√∫n el tipo de red en la que te encuentres.
- **Reglas de seguridad personalizadas:** El Firewall de Windows te permite crear reglas personalizadas basadas en diversos criterios, como protocolos, interfaces de red y usuarios.

![firewall6](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/firewall6.png?raw=true)

### **Conclusion**

Al configurar adecuadamente el Firewall de Windows y seguir buenas pr√°cticas de seguridad en l√≠nea, puedes fortalecer significativamente tu defensa contra hackers y malware. Recuerda que la ciberseguridad es un esfuerzo constante y estar informado sobre las √∫ltimas amenazas y vulnerabilidades te ayudar√° a mantener tu sistema seguro y protegido.

## **¬øC√≥mo configurar un firewall en servidores Linux?**

Para una correcta y segura instalaci√≥n de un servidor de Internet necesitamos disponer y configurar un firewall. El firewall **se encarga de regular el tr√°fico de entrada y de salida con nuestra m√°quina,** de modo que podamos comprobar que est√° relacionado con alguno de los servicios que el servidor ofrece, permitiendo o denegando las conexiones de manera selectiva.

Con nuestro firewall podremos decidir por ejemplo que se acepten conexiones para la consulta de una web por HTTP o para las conexiones por SSH, pero que deniegue todos los otros intentos de conexi√≥n a servicios distintos, que no se desean ofrecer. Generalmente, el **tr√°fico que nos interesar√° controlar es el entrante**, ya que ser√° desde donde nos lleguen posibles ataques al servidor. El tr√°fico desde el servidor hacia afuera generalmente no nos debe de preocupar, por lo que generalmente no se suele limitar.

- **Firewall UFW**

El firewall UFW (Uncomplicated Firewall) es uno de los m√°s populares de los sistemas Linux, debido a su sencillez de configuraci√≥n. Est√° disponible de manera predeterminada en muchas de las distribuciones de Linux. Si no fuera el caso, **podr√≠amos instalarlo por medio de los repositorios del sistema**, con el comando t√≠pico para cada distribuci√≥n. Por ejemplo en sistemas basados en Debian se har√≠a con el comando siguiente:

> sudo apt install ufw

Una vez instalado tenemos una suite de comandos para gestionar el propio firewall y las conexiones del servidor. UFW viene desactivado por defecto, para evitar posibles problemas de acceso al servidor antes de su configuraci√≥n, por lo que el primer paso consistir√° en definir qu√© tipos de conexi√≥n deseamos habilitar, para posteriormente activar el firewall. Podemos comprobar el estado del firewall con el comando ¬´ufw status¬ª. En un principio deber√≠amos ver que est√° inactivo.

> sudo ufw status

![firewall7](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/firewall7.png?raw=true)

Es importante que, antes de activar el firewall, configuremos las conexiones permitidas, habilitando al menos el acceso por SSH, para que no perdamos el acceso al servidor. Para saber qu√© tipo de conexiones podemos activar o desactivar en el servidor, ejecutamos el comando.

> sudo ufw app list

La salida de ese comando nos indicar√° qu√© aplicaciones localiza el firewall susceptibles de configurar en nuestro sistema.

- **Habilitar SSH**

Para permitir el acceso al servidor por SSH debemos habilitar las conexiones con la aplicaci√≥n ¬´**OpenSSH**¬´. Esto lo conseguimos con el comando siguiente:

> sudo ufw allow "OpenSSH"

De manera predeterminada se permiten conexiones tanto para IPV4 como para IPV6. Los puertos de conexi√≥n habilitados ser√°n los predeterminados para estos tipos de conexi√≥n (en SSH el puerto 22).

- **Habilitar tr√°fico HTTP al servidor web**

De manera similar, podemos habilitar el tr√°fico de HTTP para el acceso al servidor web instalado. En nuestro caso, que tenemos Apache en el servidor, realizar√≠amos la configuraci√≥n habilitando la mencionada aplicaci√≥n.

> sudo ufw allow "Apache Full"

La aplicaci√≥n ¬´**Apache Full**¬ª nos permite el acceso por HTTP por los puertos comunes de HTTP (80) y HTTPS (443).

- **Activar el firewall**

Una vez realizada la configuraci√≥n, podemos activar ya el firewall, con el comando ¬´ufw enable¬ª.

> sudo ufw enable

Nos advertir√° que las conexiones por SSH pueden ser interrumpidas, pero podemos estar tranquilos porque las acabamos de habilitar con los comandos anteriores. Por √∫ltimo, podemos comprobar la configuraci√≥n de UFW con el comando ¬´ufw status¬ª. Ahora deber√≠amos ver que el firewall se encuentra activo y adem√°s podremos obtener un listado de aplicaciones habilitadas.

> sudo ufw status

![firewall8](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/firewall8.png?raw=true)

> ü§ì **Eso es todo. La configuraci√≥n del firewall se ha realizado correctamente y ya se encuentra activo en nuestro servidor para incrementar la seguridad.**

</aside>

## **Configuraci√≥n de pfSense en VMWare Workstation**

pfSense es un firewall de c√≥digo abierto y su distribuci√≥n FreeBSD. Es m√°s popular que otros firewalls y tambi√©n podemos instalarlo como m√°quina virtual. pfSense tambi√©n dispone de dispositivos f√≠sicos, y tambi√©n podemos instalar pfSense en la nube (AWS y Azure).

### **Instalaci√≥n**

Primero, necesitaba tener un software de virtualizaci√≥n como VMWare o Virtual Box, y ahora estoy usando VMWare para instalar pfSense. En segundo lugar, debe tener una m√°quina virtual Linux o Windows para la configuraci√≥n del servidor Ngnix; Estoy usando Ubuntu por ahora.

Abre tu navegador favorito y busque " descarga de pfSense " o abre¬†https://www.pfsense.org/download/

![pfSense1](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense1.png?raw=true)

Ser√°s redirigido a la p√°gina de descarga de pfSense.

![pfSense2](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense2.png?raw=true)

- Despu√©s de la descarga, **descomprima** este archivo. Ahora abra VMWare, luego haz clic en **Crear una nueva m√°quina virtual.**

![pfSense3](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense3.png?raw=true)

Ahora hazclic en **t√≠pico,** luego haga clic en **Siguiente.**

![pfSense4](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense4.png?raw=true)

Selecciona la ubicaci√≥n del archivo haciendo clic en **Examinar** . Aqu√≠, VMWare detect√≥ autom√°ticamente que era **FreeBSD.** Luego haz clic en **Siguiente** .

![pfSense5](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense5.png?raw=true)

Puedes editar el nombre de la VM y elegir la ruta donde deseas almacenar la VM o mantener todo por defecto. Luego, haz clic en **Siguiente.**

![pfSense6](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense6.png?raw=true)

Proporciona el **espacio m√°ximo en disco** que desea asignar para pfSense y haz clic en **Siguiente**.

![pfSense7](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense7.png?raw=true)

Est√°s en el paso final, que es el paso clave que muchas personas enfrentan con este problema.

![pfSense8](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense8.png?raw=true)

Haz clic en **Adaptador de red** y configure este adaptador para WAN para comunicarse con Internet. Luego haz clic en **Agregar. Luego ver√°s una pantalla como la de la imagen de abajo.**

![pfSense9](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense9.png?raw=true)

Elije **Adaptador de red** , haz clic en **Finalizar** .

![pfSense10](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense10.png?raw=true)

Ahora utiliza este adaptador para la comunicaci√≥n **LAN** . Ahora Crate es una red de √°rea local haciendo clic en el **segmento LAN** .

![pfSense11](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense11.png?raw=true)

Haz clic en Agregar. y luego nombrarlo como desees.

![pfSense12](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense12.png?raw=true)

![pfSense13](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense13.png?raw=true)

Haz clic en **Encender la m√°quina**.¬†pfSense tardar√° un poco en iniciarse y luego **aceptar√°s** sus t√©rminos y condiciones haciendo clic **en Entrar**. Ver√°s tres opciones. Elija la primera opci√≥n, **Instalar** , luego presione Enter.

![pfSense14](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense14.png?raw=true)

Ve por defecto en este paso.

![pfSense15](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense15.png?raw=true)

Haz clic en todo lo predeterminado, presione Enter.

![pfSense16](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense16.png?raw=true)

![pfSense17](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense17.png?raw=true)

![pfSense18](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense18.png?raw=true)

Pulsa el espacio aqu√≠.

![pfSense19](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense19.png?raw=true)

Entonces elige **S√ç**

![pfSense20](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense20.png?raw=true)

Tomar√° un tiempo.

![pfSense21](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense21.png?raw=true)

![pfSense22](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense22.png?raw=true)

![pfSense23](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense23.png?raw=true)

> üòÅ Hemos instalado pfSense con √©xito.

</aside>

## **Configuraci√≥n de Ubuntu**

Encienda la m√°quina virtual Ubuntu.

![Ubuntu1](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/ubuntu1.png?raw=true)

Luego el adaptador LAN que elijas en pfSense.

![Ubuntu2](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/ubuntu2.png?raw=true)

En pfSense tambi√©n se utiliz√≥ el mismo adaptador de red.

![Ubuntu3](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/ubuntu3.png?raw=true)

Ahora enciende la m√°quina Ubuntu. Abre la terminal y actualice los repositorios escribiendo el comando **sudo apt update. I**nstala el servidor Nginx mediante **sudo apt install nginx** .

![Ubuntu4](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/ubuntu4.png?raw=true)

![Ubuntu5](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/ubuntu5.png?raw=true)

Abre Firefox o su navegador favorito en Ubuntu y verifica el host local si el servidor se est√° ejecutando o no.

![Ubuntu6](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/ubuntu6.png?raw=true)

Configura el firewall de ubuntu. De forma predeterminada, el firewall **ufw** est√° instalado en ubuntu. Primero, verifica las aplicaciones escribiendo el comando **sudo ufw app list** y el comando restante para permitir y denegar las reglas que se muestran en la siguiente imagen.

![Ubuntu7](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/ubuntu7.png?raw=true)

Hemos agregado con √©xito la regla de denegaci√≥n en el firewall ufw de Ubuntu.

**Configuraci√≥n de pfSense**

Despu√©s de iniciar pfSense, ver√° la pantalla de bienvenida.

![Ubuntu8](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/ubuntu8.png?raw=true)

De forma predeterminada, DHCP est√° habilitado y IPV6 tambi√©n est√° habilitado para algunas personas, no te preocupes, lo solucionaremos. DHCP asignar√° autom√°ticamente la direcci√≥n IP; Podemos configurarlo usando IP est√°tica. Necesita tener una IP est√°tica para pfSense. En pfSense, seleccione **la opci√≥n 2** , luego elija la opci√≥n 1 (WAN). Si desea continuar con DHCP, presione **Y** , pero enfrentar√° muchos problemas en el futuro. Dependiendo del rango de sus subredes, seleccione subred. Para fines dom√©sticos, utilice una m√°scara de 24 subredes.

![pfSense24](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense24.png?raw=true)

![pfSense25](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense25.png?raw=true)

![pfSense26](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense26.png?raw=true)

Ahora abra ubuntu, luego abra el navegador y escriba la direcci√≥n IP de LAN. En mi caso es 192.168.1.1. De forma predeterminada, el usuario y la contrase√±a son **admin** y **pfsense,** respectivamente.

![pfSense27](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense27.png?raw=true)

![pfSense28](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense28.png?raw=true)

![pfSense29](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense29.png?raw=true)

Si tiene un nombre de host y un servidor DNS, complete esos detalles. Aqu√≠, voy todo por defecto.

![pfSense30](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense30.png?raw=true)

![pfSense31](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense31.png?raw=true)

![pfSense32](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense32.png?raw=true)

Baje y desmarque, bloquee la red privada y la red sin ruta de Internet.

![pfSense33](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense33.png?raw=true)

![pfSense34](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense34.png?raw=true)

![pfSense35](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense35.png?raw=true)

En este paso, cambie la contrase√±a de administrador. Si se est√° configurando el firewall en la oficina o en casa, no se recomienda utilizar una cuenta de administrador ni contrase√±as seguras tanto para los usuarios como para el administrador. Aqu√≠ lo estoy usando solo para fines de laboratorio, por lo que mantengo todo por defecto.

![pfSense36](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense36.png?raw=true)

![pfSense37](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense37.png?raw=true)

![pfSense38](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense38.png?raw=true)

Tambi√©n se realiza la configuraci√≥n de pfSense. Necesitamos agregar una regla NAT al firewall. Abra la p√°gina de inicio de pfSense y haga clic en **Firewall** y luego haga clic en **NAT** .

![pfSense39](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense39.png?raw=true)

Haz clic en **Agregar** . Esta es la primera regla, por lo que no debemos preocuparnos por esas flechas al agregar. Si tiene muchas reglas antes o en el futuro, desea agregar esa regla en la parte superior, luego haga clic en **la flecha hacia arriba Agregar** o agregue eso en la parte inferior y luego haga clic en la **flecha inferior agregar** .

![pfSense40](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense40.png?raw=true)

Aqu√≠, mantenga todos los valores predeterminados excepto la direcci√≥n IP de destino, la IP de origen y los puertos. En el destino, ingrese la direcci√≥n IP de pfSense seleccionando Host √∫nico o alias. En mi caso, es 192.168.0.100.

![pfSense41](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense41.png?raw=true)

![pfSense42](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense42.png?raw=true)

En el rango de puerto de destino, ingrese el puerto al que desea redirigir el tr√°fico. En mi caso son 9000.

![pfSense43](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense43.png?raw=true)

En la fuente, direcci√≥n IP, de donde proviene el tr√°fico, en nuestro caso, proviene de Ubuntu, as√≠ que ingrese la IP de Ubuntu (192.168.1.100).

![pfSense44](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense44.png?raw=true)

![pfSense45](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense45.png?raw=true)

Haz clic en **guardar**. Ahora haga clic en aplicar cambios.

![pfSense46](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense46.png?raw=true)

Ahora en su m√°quina host, abra el navegador y busque pfSense IP y el puerto que ha configurado.

![pfSense47](https://github.com/4GeeksAcademy/cybersecurity-syllabus/blob/main/assets/pfsense47.png?raw=true)

Eso es todo. Ha realizado correctamente el reenv√≠o de puertos con pfSense.

## **Configura el firewall de Linux con IPtables y protege tu servidor**

**iptables** es el firewall que se utiliza en sistemas operativos basados en Linux. Aunque en los √∫ltimos a√±os tenemos instalado de forma predeterminada nftables, a√∫n se puede utilizar la sintaxis de iptables para configurar el cortafuegos en nuestro sistema operativo, como Debian, Ubuntu e incluso el firewall del router si est√° basado en Linux. Conocer iptables es muy importante para mantener protegida nuestra red local de intrusiones, esto se debe a que iptables nos dar√° la posibilidad de permitir o denegar el tr√°fico que nosotros queramos. Vamos a explicar c√≥mo funciona iptables, y ejemplos de utilizaci√≥n avanzada.

### **Principales caracter√≠sticas de iptables**

iptables es un software que se encarga de **actuar como un firewall o cortafuegos en nuestra red**. Es una parte muy importante de los sistemas operativos, y es que est√° espec√≠ficamente dise√±ado para permitir el acceso autorizado y bloquear el acceso no autorizado. Un firewall establece un punto de control, tanto de entrada como salida de los paquetes, adem√°s, es muy importante indicar que un cortafuegos protege del tr√°fico que atraviesan diferentes redes, pero no protege la red local de ataques que se produzcan dentro de una misma subred.

iptables es el cortafuegos incluido en sistemas Linux desde la versi√≥n 2.4, por lo tanto, est√° incorporado de forma predeterminada en sistemas como Debian, Ubuntu, Linux Mint y muchos otros, aunque actualmente de forma interna se utiliza nftables, porque iptables se considera antiguo, aunque hoy en d√≠a todav√≠a se utiliza **iptables** ampliamente en el mundo de la administraci√≥n de sistemas Linux y tambi√©n en el mundo de la administraci√≥n de redes.

Este cortafuegos dispone de varias tablas creadas de forma predeterminada, con el objetivo de facilitar enormemente la posibilidad de a√±adir diferentes cadenas y reglas. Un detalle muy importante, es que de forma predeterminada tenemos todo en ¬´aceptar¬ª, es decir, todo el tr√°fico se permite, no hay ninguna regla para denegar el tr√°fico, por lo tanto, en un primer momento este firewall es permisivo, pero podemos cambiar la pol√≠tica predeterminada de forma muy f√°cil y r√°pida.

### **Mejoras de rendimiento**

Como puedes ver, Iptables son una soluci√≥n muy buena para realizar configuraciones y administraci√≥n del firewall del sistema. Pero m√°s all√° de las configuraciones que podamos llevar a cabo, Iptables es capaz de mejorar el rendimiento de nuestro sistema de una forma que puede ser bastante significativa. Una de las formas en las cuales lo hace, es a trav√©s de la configuraci√≥n de la tasa de paquetes. Si estos cuentan con actividad limitada de ancho de banda, se pueden establecer la cantidad de los mismos que se pueden enviar o recibir en un tiempo determinado. Esto evita las sobrecargas del sistema, y asegura que el tr√°fico tenga una distribuci√≥n uniforme.

Otra de las formas en las cuales nos puede ayudar, es con **las reglas de filtrado de paquetes**. Si conocemos el tr√°fico que es innecesario, se pueden establecer reglas para poder bloquearlo antes de que llegue a entrar al sistema. Esto nos va a ayudar a reducir de forma considerable en algunos casos, reducir la cantidad de tr√°fico que circula por la red, mejorando el rendimiento de una forma generalizada. A esto le podemos sumar las reglas de enrutamiento, las cuales son tremendamente √∫tiles en gran cantidad de casos diferentes.

Cuando disponemos de redes muy complejas, con m√∫ltiples segmentos de red o rutas diferentes, estas reglas de enrutamiento nos garantizan que los paquetes que circulan se env√≠an por la ruta m√°s eficiente y directa posible. Esto reduce los tiempos de latencia y de nuevo, mejora el rendimiento general de nuestra red. Por no hablar de todas las funciones avanzadas para los controles de calidad QoS. Esta cuando tienen la configuraci√≥n adecuada, puede establecer prioridades para garantizar que se cumplen todos los requisitos de ancho de banda. Por lo cual todas las aplicaciones de ver√°n directamente beneficiadas en su rendimiento.